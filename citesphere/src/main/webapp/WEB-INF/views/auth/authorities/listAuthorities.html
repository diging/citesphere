<html layout:decorate="~{layouts/main}">
<head></head>
<body>

<div layout:fragment="content">
	<ol class="breadcrumb">
		<li><a th:href="@{/}">Home</a></li>
		<li><a th:href="@{/auth/authority/list}">Managed Authority Entries</a></li>
	</ol>
	<h2>List of citations for person: <span th:text="${form.name}"></span></h2>
	<div id="wrapper">
	<div class="col-md-2 sticky">
		<ul class="list-group" id="collectionsList">
		<th:block th:each="collection:${citationCollections}">
		  <li class="list-group-item collections">
			  <span class="badge" th:text="${collection.numberOfItems}"/>
			  <a th:href="@{|/auth/group/${zoteroGroupId}/collection/${collection.key}/items|}"><span th:text="${collection.name}"/></a>
		  </li>
		</th:block>
		</ul>
	</div>
	<div class="col-md-10" id="citationBlock">

	<table class="table table-striped table-bordered">
		<tr>
			<th title="Move to a collection">
			<div class="btn-group">
				<button id="btnGroupDrop1" type="button" class="btn btn-secondary dropdown-toggle icon-move-to " style="font-size:160%"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
     			<span class="caret"></span></button>
    			<div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
      				<li id="selectAll" class="dropdown-item"><a>All</a></li>
      				<li id="deSelectAll" class="dropdown-item"><a>None</a></li>
    			</div>
			</div>
			</th>
			<th>Type</th>
			<th>Authors</th>
			<th>Title</th>
			<th>Date</th>
			<th>URL</th>
			<th th:each="column:${columns}" th:with="columnLabel=${@labelsResource.getProperty('_item_attribute_label_' + column)}">
				[[${columnLabel}]]
			</th>
		</tr>
		
		<tr th:id="'tr-'+${entry.key}" data-action='draggable' class="items" th:each="entry,loop : ${items}">
			<td><input title="Select" type="checkbox" id="checkbox" class="checkboxes" th:data-entry-key="${entry.key}" th:data-index="${loop.index}"/>&nbsp;</td>
			<td>
			  <span class="text-warning">
			  <div th:with="iconClass=${@iconsResource.getProperty(entry.itemType + '_icon')}
			  , iconLabel=${@iconsResource.getProperty(entry.itemType + '_label')}">
				<i th:classappend="${!#strings.isEmpty(iconClass)} ? ${iconClass} : 'icon-docs'" th:title="${iconLabel} ?: ${entry.itemType}"></i> [[${iconLabel} ?: ${entry.itemType}]]
				</div>
			  </span>
			</td>
			<td th:data-key="${entry.key}" th:data-index="${loop.index}">
			    <a class="bib-entry" th:if="${!#strings.isEmpty(collectionId)}" th:href="@{|/auth/group/${zoteroGroupId}/items/${entry.key}?index=${loop.index}&collectionId=${collectionId}&page=${currentPage}&sortBy=${sort}|}">
			        <th:block th:each="author,status : ${entry.authors}">
			            <strong style="color: black">[[${author.lastName}]]<span style="color: black" th:if="${!#strings.isEmpty(author.firstName)}">, [[${author.firstName}]]</span></strong><span th:if="${!status.last}">; </span>
			        </th:block>
			    </a>
			    <a class="bib-entry" th:if="${!#strings.isEmpty(searchTerm)}" th:href="@{|/auth/group/${zoteroGroupId}/items/${entry.key}?searchTerm=${searchTerm}&index=${loop.index}&page=${currentPage}&sortBy=${sort}|}">
			        <th:block th:each="author,status : ${entry.authors}">
			            <strong style="color: black">[[${author.lastName}]]<span style="color: black" th:if="${!#strings.isEmpty(author.firstName)}">, [[${author.firstName}]]</span></strong><span th:if="${!status.last}">; </span>
			        </th:block>
			    </a>
			    <a class="bib-entry" th:unless="${!#strings.isEmpty(searchTerm) or !#strings.isEmpty(collectionId)}" th:href="@{|/auth/group/${zoteroGroupId}/items/${entry.key}?index=${loop.index}&page=${currentPage}&sortBy=${sort}|}">
			        <th:block th:each="author,status : ${entry.authors}">
			            <strong style="color: black">[[${author.lastName}]]<span style="color: black" th:if="${!#strings.isEmpty(author.firstName)}">, [[${author.firstName}]]</span></strong><span th:if="${!status.last}">; </span>
			        </th:block>
			    </a>
		 	</td>
		 	<td th:data-key="${entry.key}" th:data-index="${loop.index}">
			    <a class="bib-entry" th:if="${!#strings.isEmpty(collectionId)}" th:href="@{|/auth/group/${zoteroGroupId}/items/${entry.key}?index=${loop.index}&collectionId=${collectionId}&page=${currentPage}&sortBy=${sort}|}">
			        <em style="color: black">[[${entry.title}]]</em>
			    </a>
			    <a class="bib-entry" th:if="${!#strings.isEmpty(searchTerm)}" th:href="@{|/auth/group/${zoteroGroupId}/items/${entry.key}?searchTerm=${searchTerm}&index=${loop.index}&page=${currentPage}&sortBy=${sort}|}">
			        <em style="color: black">[[${entry.title}]]</em>
			    </a>
			    <a class="bib-entry" th:unless="${!#strings.isEmpty(searchTerm) or !#strings.isEmpty(collectionId)}" th:href="@{|/auth/group/${zoteroGroupId}/items/${entry.key}?index=${loop.index}&page=${currentPage}&sortBy=${sort}|}">
			        <em style="color: black">[[${entry.title}]]</em>
			    </a>
		 	</td>
		 	<td th:data-key="${entry.key}" th:data-index="${loop.index}">
			    <a class="bib-entry" style="color: black" th:if="${!#strings.isEmpty(collectionId)}" th:href="@{|/auth/group/${zoteroGroupId}/items/${entry.key}?index=${loop.index}&collectionId=${collectionId}&page=${currentPage}&sortBy=${sort}|}">
			        [[${entry.dateFreetext}]]
			    </a>
			    <a class="bib-entry" style="color: black" th:if="${!#strings.isEmpty(searchTerm)}" th:href="@{|/auth/group/${zoteroGroupId}/items/${entry.key}?searchTerm=${searchTerm}&index=${loop.index}&page=${currentPage}&sortBy=${sort}|}">
			        [[${entry.dateFreetext}]]
			    </a>
			    <a class="bib-entry" style="color: black" th:unless="${!#strings.isEmpty(searchTerm) or !#strings.isEmpty(collectionId)}" th:href="@{|/auth/group/${zoteroGroupId}/items/${entry.key}?index=${loop.index}&page=${currentPage}&sortBy=${sort}|}">
			        [[${entry.dateFreetext}]]
			    </a>
		 	</td>
		 	<td>
		 		<span th:if="${!#strings.isEmpty(entry.url)}">
		 		<a href="${entry.url}" target="_blank" th:title="${entry.url} "><i class="icon-www"></i></a>
		 		</span>
		 	</td>
		 	<td th:each="column:${columns}" style="max-width:300px;">
		 		[[${entry[column]}]]
		 	</td>
		</tr>
	</table>
</div>
	
</div>
</body>
</html>